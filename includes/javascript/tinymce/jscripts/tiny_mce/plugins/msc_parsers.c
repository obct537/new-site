<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Apache Portable Runtime: Shared Memory Routines</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Shared Memory Routines<br/>
<small>
[<a class="el" href="group___a_p_r.html">Apache Portability Runtime library</a>]</small>
</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="group__apr__shm.html#ga79e8c16bdeaf7ade4ef0f935249e7c2f">apr_shm_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#ga79e8c16bdeaf7ade4ef0f935249e7c2f">apr_shm_t</a></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#gac370c4943c22505ce2b0d57c51805480">apr_shm_create</a> (<a class="el" href="group__apr__shm.html#ga79e8c16bdeaf7ade4ef0f935249e7c2f">apr_shm_t</a> **m, apr_size_t reqsize, const char *filename, <a class="el" href="group__apr__pools.html#gaf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *pool)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#gaee8b7d9b952ff6157ddbb00fabb477e0">apr_shm_remove</a> (const char *filename, <a class="el" href="group__apr__pools.html#gaf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *pool)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#ga7de5b65a9c7d9840bfa289854f8d59d4">apr_shm_destroy</a> (<a class="el" href="group__apr__shm.html#ga79e8c16bdeaf7ade4ef0f935249e7c2f">apr_shm_t</a> *m)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#ga0e542941c280cb72b78e30d452464759">apr_shm_attach</a> (<a class="el" href="group__apr__shm.html#ga79e8c16bdeaf7ade4ef0f935249e7c2f">apr_shm_t</a> **m, const char *filename, <a class="el" href="group__apr__pools.html#gaf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *pool)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#ga900095a06d3fdb4cdd04ca4449a9d42a">apr_shm_detach</a> (<a class="el" href="group__apr__shm.html#ga79e8c16bdeaf7ade4ef0f935249e7c2f">apr_shm_t</a> *m)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#gade739e1f5f4e88c93256a63ebfd47d4d">apr_shm_baseaddr_get</a> (const <a class="el" href="group__apr__shm.html#ga79e8c16bdeaf7ade4ef0f935249e7c2f">apr_shm_t</a> *m)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">apr_size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#ga557ae85d3f225620a77ad80caeaacac7">apr_shm_size_get</a> (const <a class="el" href="group__apr__shm.html#ga79e8c16bdeaf7ade4ef0f935249e7c2f">apr_shm_t</a> *m)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__apr__pools.html#gaf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__apr__shm.html#ga072c40df7643e697885935ae65545098">apr_shm_pool_get</a> (const <a class="el" href="group__apr__shm.html#ga79e8c16bdeaf7ade4ef0f935249e7c2f">apr_shm_t</a> *theshm)</td></tr>
</table>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="ga79e8c16bdeaf7ade4ef0f935249e7c2f"></a><!-- doxytag: member="apr_shm.h::apr_shm_t" ref="ga79e8c16bdeaf7ade4ef0f935249e7c2f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="group__apr__shm.html#ga79e8c16bdeaf7ade4ef0f935249e7c2f">apr_shm_t</a> <a class="el" href="group__apr__shm.html#ga79e8c16bdeaf7ade4ef0f935249e7c2f">apr_shm_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Private, platform-specific data struture representing a shared memory segment. </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga0e542941c280cb72b78e30d452464759"></a><!-- doxytag: member="apr_shm.h::apr_shm_attach" ref="ga0e542941c280cb72b78e30d452464759" args="(apr_shm_t **m, const char *filename, apr_pool_t *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a> apr_shm_attach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__apr__shm.html#ga79e8c16bdeaf7ade4ef0f935249e7c2f">apr_shm_t</a> **&nbsp;</td>
          <td class="paramname"> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__apr__pools.html#gaf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Attach to a shared memory segment that was created by another process. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>m</em>&nbsp;</td><td>The shared memory structure to create. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>The file used to create the original segment. (This MUST match the original filename.) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>the pool from which to allocate the shared memory structure for this process. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gade739e1f5f4e88c93256a63ebfd47d4d"></a><!-- doxytag: member="apr_shm.h::apr_shm_baseaddr_get" ref="gade739e1f5f4e88c93256a63ebfd47d4d" args="(const apr_shm_t *m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* apr_shm_baseaddr_get </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__apr__shm.html#ga79e8c16bdeaf7ade4ef0f935249e7c2f">apr_shm_t</a> *&nbsp;</td>
          <td class="paramname"> <em>m</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Retrieve the base address of the shared memory segment. NOTE: This address is only usable within the callers address space, since this API does not guarantee that other attaching processes will maintain the same address mapping. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>m</em>&nbsp;</td><td>The shared memory segment from which to retrieve the base address. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>address, aligned by APR_ALIGN_DEFAULT. </dd></dl>

</div>
</div>
<a class="anchor" id="gac370c4943c22505ce2b0d57c51805480"></a><!-- doxytag: member="apr_shm.h::apr_shm_create" ref="gac370c4943c22505ce2b0d57c51805480" args="(apr_shm_t **m, apr_size_t reqsize, const char *filename, apr_pool_t *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a> apr_shm_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__apr__shm.html#ga79e8c16bdeaf7ade4ef0f935249e7c2f">apr_shm_t</a> **&nbsp;</td>
          <td class="paramname"> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">apr_size_t&nbsp;</td>
          <td class="paramname"> <em>reqsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__apr__pools.html#gaf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create and make accessable a shared memory segment. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>m</em>&nbsp;</td><td>The shared memory structure to create. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>reqsize</em>&nbsp;</td><td>The desired size of the segment. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>The file to use for shared memory on platforms that require it. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>the pool from which to allocate the shared memory structure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="remark"><dt><b>Remarks:</b></dt><dd>A note about Anonymous vs. Named shared memory segments: Not all plaforms support anonymous shared memory segments, but in some cases it is prefered over other types of shared memory implementations. Passing a NULL 'file' parameter to this function will cause the subsystem to use anonymous shared memory segments. If such a system is not available, APR_ENOTIMPL is returned. </dd>
<dd>
A note about allocation sizes: On some platforms it is necessary to store some metainformation about the segment within the actual segment. In order to supply the caller with the requested size it may be necessary for the implementation to request a slightly greater segment length from the subsystem. In all cases, the <a class="el" href="group__apr__shm.html#gade739e1f5f4e88c93256a63ebfd47d4d">apr_shm_baseaddr_get()</a> function will return the first usable byte of memory. </dd></dl>

</div>
</div>
<a class="anchor" id="ga7de5b65a9c7d9840bfa289854f8d59d4"></a><!-- doxytag: member="apr_shm.h::apr_shm_destroy" ref="ga7de5b65a9c7d9840bfa289854f8d59d4" args="(apr_shm_t *m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a> apr_shm_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__apr__shm.html#ga79e8c16bdeaf7ade4ef0f935249e7c2f">apr_shm_t</a> *&nbsp;</td>
          <td class="paramname"> <em>m</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Destroy a shared memory segment and associated memory. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>m</em>&nbsp;</td><td>The shared memory segment structure to destroy. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga900095a06d3fdb4cdd04ca4449a9d42a"></a><!-- doxytag: member="apr_shm.h::apr_shm_detach" ref="ga900095a06d3fdb4cdd04ca4449a9d42a" args="(apr_shm_t *m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a> apr_shm_detach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__apr__shm.html#ga79e8c16bdeaf7ade4ef0f935249e7c2f">apr_shm_t</a> *&nbsp;</td>
          <td class="paramname"> <em>m</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Detach from a shared memory segment without destroying it. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>m</em>&nbsp;</td><td>The shared memory structure representing the segment to detach from. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga072c40df7643e697885935ae65545098"></a><!-- doxytag: member="apr_shm.h::apr_shm_pool_get" ref="ga072c40df7643e697885935ae65545098" args="(const apr_shm_t *theshm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__pools.html#gaf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a>* apr_shm_pool_get </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__apr__shm.html#ga79e8c16bdeaf7ade4ef0f935249e7c2f">apr_shm_t</a> *&nbsp;</td>
          <td class="paramname"> <em>theshm</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the pool used by this shared memory segment. </p>

</div>
</div>
<a class="anchor" id="gaee8b7d9b952ff6157ddbb00fabb477e0"></a><!-- doxytag: member="apr_shm.h::apr_shm_remove" ref="gaee8b7d9b952ff6157ddbb00fabb477e0" args="(const char *filename, apr_pool_t *pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__apr__errno.html#gaf76ee4543247e9fb3f3546203e590a6c">apr_status_t</a> apr_shm_remove </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__apr__pools.html#gaf137f28edcf9a086cd6bc36c20d7cdfb">apr_pool_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pool</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Remove named resource associated with a shared memory segment, preventing attachments to the resource, but not destroying it. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>The filename associated with shared-memory segment which needs to be removed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>The pool used for file operations </td></tr>
  </table>
  </dd>
</dl>
<dl class="remark"><dt><b>Remarks:</b></dt><dd>This function is only supported on platforms which support name-based shared memory segments, and will return APR_ENOTIMPL on platforms without such support. Removing the file while the shm is in use is not entirely portable, caller may use this to enhance obscurity of the resource, but be prepared for the the call to fail, and for concurrent attempts to create a resource of the same name to also fail. The pool cleanup of apr_shm_create (apr_shm_destroy) also removes the named resource. </dd></dl>

</div>
</div>
<a class="anchor" id="ga557ae85d3f225620a77ad80caeaacac7"></a><!-- doxytag: member="apr_shm.h::apr_shm_size_get" ref="ga557ae85d3f225620a77ad80caeaacac7" args="(const apr_shm_t *m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">apr_size_t apr_shm_size_get </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__apr__shm.html#ga79e8c16bdeaf7ade4ef0f935249e7c2f">apr_shm_t</a> *&nbsp;</td>
          <td class="paramname"> <em>m</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Retrieve the length of a shared memory segment in bytes. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>m</em>&nbsp;</td><td>The shared memory segment from which to retrieve the segment length. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Mon May 23 21:31:33 2011 for Apache Portable Runtime by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
